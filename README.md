# Next.js + Supabase + Creem Template

í”„ë¡œë•ì…˜ ë ˆë”” ì¸ì¦ ë° ê²°ì œ ì‹œìŠ¤í…œì´ í†µí•©ëœ Next.js í…œí”Œë¦¿ì…ë‹ˆë‹¤. ì´ í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ë©´ ëª‡ ë¶„ ë§Œì— SaaS í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸš€ ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: Next.js 15.5.5, React 19.1.0, Tailwind CSS
- **Auth & DB**: Supabase
- **Payment**: Creem
- **State Management**: TanStack Query (React Query)
- **Notifications**: Sonner
- **Language**: TypeScript

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/webhooks/creem/     # Creem ì›¹í›… ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ dashboard/              # ëŒ€ì‹œë³´ë“œ í˜ì´ì§€
â”‚   â”œâ”€â”€ login/                  # ë¡œê·¸ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ auth/                   # ì¸ì¦ ì½œë°±
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Header.tsx              # í—¤ë”
â”‚   â””â”€â”€ PricingPlans.tsx        # ìš”ê¸ˆì œ (Creem ì—°ë™)
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ creem-hook.ts           # Creem React Hooks
â”‚   â””â”€â”€ user-hook.ts            # User React Hooks
â”œâ”€â”€ lib/supabase/
â”‚   â”œâ”€â”€ client.ts               # ë¸Œë¼ìš°ì € í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ server.ts               # ì„œë²„ í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ admin.ts                # Admin í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ providers/
â”‚   â””â”€â”€ query-provider.tsx      # React Query Provider
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ creem.ts                # Creem API í†µì‹ 
â”‚   â””â”€â”€ user.ts                 # ì‚¬ìš©ì ì„œë¹„ìŠ¤
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ creem.ts                # Creem íƒ€ì…
â”‚   â””â”€â”€ user.ts                 # User íƒ€ì…
â””â”€â”€ supabase/migrations/        # DB ë§ˆì´ê·¸ë ˆì´ì…˜
```

## âš¡ Quick Start

```bash
# 1. í”„ë¡œì íŠ¸ ë³µì œ
git clone [your-repo-url]
cd nextjs-supabase-creem-template

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env.local
# .env.local íŒŒì¼ì„ ì—´ì–´ ì‹¤ì œ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸

# 4. ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev
```

**ğŸ“– ìì„¸í•œ ì„¤ì • ê°€ì´ë“œëŠ” [SETUP.md](./SETUP.md)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.**

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

- âœ… **ì¸ì¦ ì‹œìŠ¤í…œ**: Supabase Auth (ì´ë©”ì¼ ì¸ì¦, ì†Œì…œ ë¡œê·¸ì¸ ì§€ì›)
- âœ… **ê²°ì œ í†µí•©**: Creemì„ í†µí•œ êµ¬ë… ê²°ì œ (ì¹´ë“œ, ê³„ì¢Œì´ì²´ ë“±)
- âœ… **ì›¹í›… ì²˜ë¦¬**: ìë™ êµ¬ë… ê´€ë¦¬ (ìƒì„±, ê°±ì‹ , ì·¨ì†Œ)
- âœ… **ë³´ì•ˆ**: RLS(Row Level Security), ì›¹í›… ì„œëª… ê²€ì¦
- âœ… **íƒ€ì… ì•ˆì „ì„±**: TypeScript ì™„ì „ ì§€ì›
- âœ… **ìƒíƒœ ê´€ë¦¬**: TanStack Queryë¡œ íš¨ìœ¨ì ì¸ ë°ì´í„° í˜ì¹­
- âœ… **UI/UX**: Tailwind CSSë¡œ êµ¬í˜„ëœ ë°˜ì‘í˜• ë””ìì¸
- âœ… **í”„ë¡œë•ì…˜ ë ˆë””**: ì¦‰ì‹œ ë°°í¬ ê°€ëŠ¥í•œ êµ¬ì¡°

## ğŸ’³ ê²°ì œ í”Œë¡œìš°

### 1. ì‚¬ìš©ì í”Œëœ ì„ íƒ
- ì‚¬ìš©ìê°€ ìš”ê¸ˆì œ "ì„ íƒí•˜ê¸°" ë²„íŠ¼ í´ë¦­
- ë¡œê·¸ì¸ í™•ì¸ (ë¯¸ë¡œê·¸ì¸ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸)

### 2. Checkout ìƒì„±
- `services/creem.ts:createCheckout()` í˜¸ì¶œ
- Creem APIì— ê²°ì œ ì„¸ì…˜ ìƒì„± ìš”ì²­

### 3. Creem ê²°ì œ í˜ì´ì§€
- ì‚¬ìš©ìë¥¼ Creem í˜¸ìŠ¤íŒ… ê²°ì œ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
- ì¹´ë“œ ì •ë³´ ì…ë ¥ ë° ê²°ì œ ì²˜ë¦¬

### 4. ì›¹í›… ì²˜ë¦¬
- Creemì´ `app/api/webhooks/creem/route.ts`ë¡œ ì›¹í›… ì „ì†¡
- ì„œëª… ê²€ì¦ (HMAC-SHA256)
- ì´ë²¤íŠ¸ íƒ€ì…ë³„ ì²˜ë¦¬:
  - `checkout.completed`: êµ¬ë… ì •ë³´ ì €ì¥, Customer ID ì €ì¥
  - `subscription.paid`: êµ¬ë… ì •ë³´ ì—…ë°ì´íŠ¸
  - `subscription.canceled`: êµ¬ë… ì·¨ì†Œ ì²˜ë¦¬

### 5. ëŒ€ì‹œë³´ë“œ í‘œì‹œ
- ì‚¬ìš©ìê°€ ëŒ€ì‹œë³´ë“œì—ì„œ êµ¬ë… ì •ë³´ í™•ì¸
- Customer Portal ë§í¬ë¡œ êµ¬ë… ê´€ë¦¬

## ğŸ” ë³´ì•ˆ

- âœ… ì›¹í›… ì„œëª… ê²€ì¦ (HMAC-SHA256)
- âœ… RLS (Row Level Security) ì •ì±…
- âœ… Admin í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì—ì„œë§Œ ì‚¬ìš©
- âœ… í™˜ê²½ ë³€ìˆ˜ë¡œ API í‚¤ ê´€ë¦¬
- âœ… ì¹´ë“œ ì •ë³´ëŠ” Creemì´ ì²˜ë¦¬ (PCI-DSS ì¤€ìˆ˜)

## ğŸ› ï¸ ì»¤ìŠ¤í„°ë§ˆì´ì§•

ì´ í…œí”Œë¦¿ì„ í”„ë¡œì íŠ¸ì— ë§ê²Œ ì‰½ê²Œ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

### 1. ìš”ê¸ˆì œ ìˆ˜ì •
`components/PricingPlans.tsx`ì—ì„œ í”Œëœ ì •ë³´ ìˆ˜ì •:
- ê°€ê²©, ê¸°ëŠ¥, ì„¤ëª… ë³€ê²½
- Creem Product ID ì—…ë°ì´íŠ¸

### 2. ë¸Œëœë”©
- `components/Header.tsx`: ì•± ì´ë¦„ ë³€ê²½
- `app/layout.tsx`: ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸
- `public/`: ë¡œê³  ë° íŒŒë¹„ì½˜ êµì²´

### 3. í˜ì´ì§€ ì¶”ê°€
- `app/` ë””ë ‰í† ë¦¬ì— ìƒˆ í˜ì´ì§€ ì¶”ê°€
- Next.js App Router êµ¬ì¡° í™œìš©

### 4. ë°ì´í„°ë² ì´ìŠ¤ í™•ì¥
- `supabase/migrations/`ì— ìƒˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ì¶”ê°€
- `types/`ì— TypeScript íƒ€ì… ì •ì˜

## ğŸ§ª ë¡œì»¬ ê°œë°œ

### ì›¹í›… í…ŒìŠ¤íŠ¸ (ngrok)
```bash
# ngrok ì„¤ì¹˜ ë° ì‹¤í–‰
ngrok http 3000

# ìƒì„±ëœ URLì„ Creem ì›¹í›… ì„¤ì •ì— ì¶”ê°€
# https://[id].ngrok.io/api/webhooks/creem
```

### ìœ ìš©í•œ ëª…ë ¹ì–´
```bash
npm run dev        # ê°œë°œ ì„œë²„ (Turbopack)
npm run build      # í”„ë¡œë•ì…˜ ë¹Œë“œ
npm start          # í”„ë¡œë•ì…˜ ì„œë²„
npm run lint       # ì½”ë“œ ë¦°íŒ…
```

## ğŸ“ ì°¸ê³  ë¬¸ì„œ

- [Next.js ë¬¸ì„œ](https://nextjs.org/docs)
- [Supabase ë¬¸ì„œ](https://supabase.com/docs)
- [Creem API ë¬¸ì„œ](https://docs.creem.io)
- [TanStack Query ë¬¸ì„œ](https://tanstack.com/query/latest)

## ğŸ“ í´ë” êµ¬ì¡° ì´í•´

```
â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”œâ”€â”€ api/webhooks/creem/  # Creem ì›¹í›… ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ auth/callback/       # ì¸ì¦ ì½œë°±
â”‚   â”œâ”€â”€ dashboard/           # ì‚¬ìš©ì ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ login/               # ë¡œê·¸ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ page.tsx             # í™ˆí˜ì´ì§€ (ìš”ê¸ˆì œ)
â”œâ”€â”€ components/              # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ Header.tsx          # ë„¤ë¹„ê²Œì´ì…˜ í—¤ë”
â”‚   â””â”€â”€ PricingPlans.tsx    # ìš”ê¸ˆì œ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ hooks/                   # React Hooks
â”‚   â”œâ”€â”€ creem-hook.ts       # Creem ê´€ë ¨ í›…
â”‚   â””â”€â”€ user-hook.ts        # ì‚¬ìš©ì ê´€ë ¨ í›…
â”œâ”€â”€ lib/supabase/            # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ client.ts           # ë¸Œë¼ìš°ì € í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ server.ts           # ì„œë²„ í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ admin.ts            # ê´€ë¦¬ì í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ middleware.ts       # ë¯¸ë“¤ì›¨ì–´ í—¬í¼
â”œâ”€â”€ providers/               # Context Providers
â”‚   â””â”€â”€ query-provider.tsx  # React Query Provider
â”œâ”€â”€ services/                # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ creem.ts            # Creem API í†µì‹ 
â”‚   â””â”€â”€ user.ts             # ì‚¬ìš©ì ì„œë¹„ìŠ¤
â”œâ”€â”€ types/                   # TypeScript íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ creem.ts            # Creem íƒ€ì…
â”‚   â””â”€â”€ user.ts             # ì‚¬ìš©ì íƒ€ì…
â”œâ”€â”€ supabase/migrations/     # ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
â””â”€â”€ docs/                    # ì¶”ê°€ ë¬¸ì„œ
```

## ğŸš€ ë°°í¬

### Vercel (ê¶Œì¥)
```bash
# Vercel CLI ì„¤ì¹˜
npm i -g vercel

# ë°°í¬
vercel

# í”„ë¡œë•ì…˜ ë°°í¬
vercel --prod
```

ë°°í¬ í›„:
1. Vercel ëŒ€ì‹œë³´ë“œì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
2. Supabaseì—ì„œ í”„ë¡œë•ì…˜ URLì„ Redirect URLsì— ì¶”ê°€
3. Creemì—ì„œ í”„ë¡œë•ì…˜ ì›¹í›… URL ì„¤ì •

### ë‹¤ë¥¸ í”Œë«í¼
- **Netlify**: Next.js ì§€ì›
- **Railway**: ë„ì»¤ ë˜ëŠ” Nixpacks
- **DigitalOcean App Platform**: Next.js ë¹Œë“œíŒ©

## ğŸ’¡ í™•ì¥ ì•„ì´ë””ì–´

ì´ í…œí”Œë¦¿ì„ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ìŒ ê¸°ëŠ¥ë“¤ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- ì›”ê°„/ì—°ê°„ í”Œëœ í† ê¸€
- í• ì¸ ì½”ë“œ ë° í”„ë¡œëª¨ì…˜
- êµ¬ë… ì—…ê·¸ë ˆì´ë“œ/ë‹¤ìš´ê·¸ë ˆì´ë“œ
- ì´ë©”ì¼ ì•Œë¦¼ (ê²°ì œ ì™„ë£Œ, ê°±ì‹  ë“±)
- ì–´ë“œë¯¼ ëŒ€ì‹œë³´ë“œ
- ì‚¬ìš©ëŸ‰ ê¸°ë°˜ ê³¼ê¸ˆ
- íŒ€ ê´€ë¦¬ ê¸°ëŠ¥
- ë‹¤ì¤‘ êµ¬ë… ì§€ì›

## ğŸ¤ ê¸°ì—¬

ì´ìŠˆë‚˜ PRì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤!

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í…œí”Œë¦¿ì€ ììœ ë¡­ê²Œ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì íŠ¸ì—ë„ ììœ ë¡­ê²Œ í™œìš©í•˜ì„¸ìš”.
